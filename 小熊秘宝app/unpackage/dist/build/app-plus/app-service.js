var AppService=function(t,e){"use strict";const o=((t,e)=>{const o=t.__vccOpts||t;for(const[s,n]of e)o[s]=n;return o})({data:()=>({app_dowtm:0,app_downstop:0,app_dowid:0}),onLaunch:function(){let t=this;uni.navigateTo({url:"/pages/open/index",animationType:"zoom-fade-out",animationDuration:200}),uni.$on("updowzt",(function(e){clearInterval(t.app_dowtm),t.app_downstop=1;const o=setTimeout((()=>{t.app_dowid=-1,t.APP_dowtmgo(2),clearTimeout(o)}),2e3)}))},methods:{APP_dowtmgo(t){let e=this;2==t&&(e.app_downstop=0),e.app_dowtm=setInterval((()=>{plus.sqlite.selectSql({name:"dowlist",sql:'select dow_url,dow_id from dowgmlist where dow_zt="0" limit 1',success:function(t){t.length>0?e.godow1(t[0].dow_id,t[0].dow_url):plus.sqlite.executeSql({name:"dowlist",sql:"UPDATE dowgmlist set dow_zt='0' where dow_zt='97'",success:function(t){}})}})}),4e3)},godow1(t,e){let o=this;o.app_dowid!=t&&(o.app_dowid=t,o.godow2(t,e))},godow2(t,e){let o=this;var s=uni.downloadFile({url:e,filePath:"gmdow",success:e=>{200===e.statusCode?(o.app_dowid=0,uni.saveFile({tempFilePath:e.tempFilePath,success:function(e){var o=e.savedFilePath;plus.sqlite.executeSql({name:"dowlist",sql:"UPDATE dowgmlist set dow_zt='66',dow_jd='100',dow_fd='"+o+"' where dow_id='"+t+"'",success:function(t){}}),plus.runtime.install(o,{force:!0},{},(function(t){uni.showToast({icon:"none",title:"安装失败",mask:!1,duration:1500})}))}})):plus.sqlite.executeSql({name:"dowlist",sql:"UPDATE dowgmlist set dow_zt='99' where dow_id='"+t+"'",success:function(t){}})}});s.onProgressUpdate((e=>{let n=Number(e.progress),i=Number(e.totalBytesWritten);100!=n&&plus.sqlite.executeSql({name:"dowlist",sql:"UPDATE dowgmlist set dow_jd='"+n+"',dow_mb='"+i+"' where dow_id='"+t+"'",success:function(t){}}),1==o.app_downstop&&s.abort()}))}},onShow:function(){let t=this;plus.sqlite.openDatabase({name:"dowlist",path:"_doc/dowlist.db",success:function(e){t.APP_dowtmgo(1)},fail:function(e){"-1402"==e.code&&t.APP_dowtmgo(1)}})},onHide:function(){clearInterval(this.app_dowtm)}},[["styles",[{}]]]);function s(){return{app:e.createVueApp(o)}}const{app:n,Vuex:i,Pinia:d}=s();return uni.Vuex=i,uni.Pinia=d,n._component.mpType="app",n._component.render=()=>{},n.mount("#app"),t.createApp=s,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({},Vue);
