"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var b=Object.create;var w=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var S=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var q=(e,o,i,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of v(o))!k.call(e,n)&&n!==i&&w(e,n,{get:()=>o[n],enumerable:!(r=y(o,n))||r.enumerable});return e};var g=(e,o,i)=>(i=e!=null?b(z(e)):{},q(o||!e||!e.__esModule?w(i,"default",{value:e,enumerable:!0}):i,e));var _=S((P,x)=>{x.exports=Vue});var T=g(_());function h(e){return weex.requireModule(e)}var f=(e,o)=>{let i=e.__vccOpts||e;for(let[r,n]of o)i[r]=n;return i};var d=uni.getWindowInfo(),E=uni.getDeviceInfo().deviceBrand,R=uni.getDeviceInfo().deviceId,F=uni.getAppBaseInfo().appName,W=uni.getAppBaseInfo().appVersionCode,L=uni.getAppBaseInfo().appVersion;var $=Number(d.screenWidth),C=Number(d.statusBarHeight),A=Number(d.screenHeight);d.safeAreaInsets.bottom>0&&uni.setStorageSync("appb",d.safeAreaInsets.bottom);var I=Number(uni.getStorageSync("appb"))?Number(uni.getStorageSync("appb")):0,O=A-C-I;var t=g(_()),j={m:{"":{width:"750rpx",paddingLeft:"30rpx",paddingRight:"30rpx"}},li:{"":{width:"690rpx",paddingTop:"30rpx"}},lis:{"":{width:"690rpx",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",backgroundColor:"rgba(255,255,255,1)",borderRadius:"20rpx",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center"}},li_l:{"":{width:"120rpx",height:"120rpx",lineHeight:"120rpx",fontSize:"100rpx",fontFamily:"iconfont",color:"#41c500"}},li_c:{"":{width:"400rpx",height:"120rpx"}},li_c_t:{"":{width:"350rpx",height:"70rpx",lineHeight:"70rpx",lines:1,textAlign:"left",fontSize:"30rpx"}},li_c_b:{"":{width:"450rpx",height:"50rpx",lineHeight:"50rpx",textAlign:"left",fontSize:"26rpx",color:"rgba(0,0,0,0.6)"}},li_r:{"":{width:"120rpx",height:"120rpx",justifyContent:"space-between",position:"relative"}},li_r_jd:{"":{position:"absolute",right:0,top:"15rpx",width:"120rpx",height:"40rpx",lineHeight:"40rpx",textAlign:"center",fontSize:"26rpx"}},li_r_t:{"":{width:"120rpx",height:"50rpx",lineHeight:"50rpx",borderRadius:"25rpx",textAlign:"center",fontSize:"22rpx",color:"#1f2531",backgroundColor:"#ffda08"}},li_r_t98:{"":{width:"120rpx",height:"50rpx",lineHeight:"50rpx",borderRadius:"25rpx",textAlign:"center",fontSize:"22rpx",color:"rgba(0,0,0,0.6)",backgroundColor:"rgba(0,0,0,0.1)"}},li_r_b:{"":{width:"120rpx",height:"50rpx",lineHeight:"50rpx",borderRadius:"25rpx",textAlign:"center",fontSize:"26rpx",backgroundColor:"rgba(0,0,0,0.1)"}}},B=h("dom"),N={data(){return{list:[],isdowtm:"",jcnum:0,isdowtms:"",dow_a_index:[]}},onLoad(){B.addRule("fontFace",{fontFamily:"iconfont",src:"url('http://www.268yx.cn/ttf/iconfontd.ttf')"})},onShow(){this.sql_c()},onHide(){this.list=[],clearInterval(this.isdowtms),this.jcnum=0},methods:{gototm(){let e=this;e.isdowtms=setInterval(()=>{e.getjd()},1e3)},getjd(){let e=this;plus.sqlite.selectSql({name:"dowlist",sql:'select dow_id,dow_jd,dow_mb from dowgmlist where dow_zt="0" limit 1',success:function(o){if(o.length>0){let i=e.dow_a_index.lastIndexOf(""+o[0].dow_id);e.list[i].dow_jd=o[0].dow_jd,e.list[i].dow_mb=o[0].dow_mb}}})},sql_c(){let e=this;plus.sqlite.selectSql({name:"dowlist",sql:"select * from dowgmlist limit 50",success:function(o){if(o.length>0){for(let i=0;i<o.length;i++)e.list=e.list.concat(o[i]),e.dow_a_index.push(""+o[i].dow_id);e.gototm()}}})},openazb(e){plus.runtime.install(this.list[e].dow_fd,{force:!0},{},function(o){uni.showToast({icon:"none",title:"\u5B89\u88C5\u5931\u8D25",mask:!1,duration:1500})})},jxdow(e){let o=this;plus.sqlite.executeSql({name:"dowlist",sql:"UPDATE dowgmlist set dow_zt='97' where dow_id='"+e+"'",success:function(i){let r=o.dow_a_index.lastIndexOf(""+e);o.list[r].dow_jd=0,o.list[r].dow_zt=0}})},ztdow(e,o){let i=this;plus.sqlite.executeSql({name:"dowlist",sql:"UPDATE dowgmlist set dow_zt='98' where dow_id='"+e+"'",success:function(r){i.list[o].dow_zt=98,uni.$emit("updowzt",{msg:"\u6682\u505C\u6E38\u620FID"+e})}})},delazb(e,o){let i=this;plus.sqlite.executeSql({name:"dowlist",sql:"DELETE FROM dowgmlist where dow_id='"+o+"'",success:function(r){uni.removeSavedFile({filePath:i.list[e].dow_fd,complete:function(n){i.list.splice(e,1)}}),uni.showToast({icon:"none",title:" \u5220\u9664\u6210\u529F ",mask:!1,duration:1500})}})}},onNavigationBarButtonTap(e){e.index=="0"&&uni.navigateBack()}};function H(e,o,i,r,n,p){let m=(0,t.resolveComponent)("progress");return(0,t.openBlock)(),(0,t.createElementBlock)("list",{class:"m"},[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(n.list,(s,l)=>((0,t.openBlock)(),(0,t.createElementBlock)("cell",{class:"li",key:l},[(0,t.createElementVNode)("view",{class:"lis",renderWhole:!0},[(0,t.createElementVNode)("u-text",{class:"li_l"},"\uE881"),(0,t.createElementVNode)("view",{class:"li_c",renderWhole:!0},[(0,t.createElementVNode)("u-text",{class:"li_c_t"},(0,t.toDisplayString)(s.dow_name),1),(0,t.createElementVNode)("u-text",{class:"li_c_b"},(0,t.toDisplayString)((s.dow_mb/1024/1024).toFixed(2))+"M",1)]),(0,t.createElementVNode)("view",{class:"li_r",renderWhole:!0},[s.dow_zt==0?((0,t.openBlock)(),(0,t.createBlock)(m,{key:0,percent:s.dow_jd,"stroke-width":"20","border-radius":"10",activeColor:"#ffda08",backgroundColor:"#ddd"},null,8,["percent"])):(0,t.createCommentVNode)("",!0),s.dow_zt==0?((0,t.openBlock)(),(0,t.createElementBlock)("u-text",{key:1,class:"li_r_jd"},(0,t.toDisplayString)(s.dow_jd)+"%",1)):(0,t.createCommentVNode)("",!0),s.dow_zt==0?((0,t.openBlock)(),(0,t.createElementBlock)("u-text",{key:2,class:"li_r_t98",onClick:a=>p.ztdow(s.dow_id,l)},"\u6682\u505C\u4E0B\u8F7D",8,["onClick"])):(0,t.createCommentVNode)("",!0),s.dow_zt==98?((0,t.openBlock)(),(0,t.createElementBlock)("u-text",{key:3,class:"li_r_t",onClick:a=>p.jxdow(s.dow_id,l)},"\u7EE7\u7EED\u4E0B\u8F7D",8,["onClick"])):(0,t.createCommentVNode)("",!0),s.dow_zt==66?((0,t.openBlock)(),(0,t.createElementBlock)("u-text",{key:4,class:"li_r_t",onClick:a=>p.openazb(l)},"\u5B89\u88C5",8,["onClick"])):(0,t.createCommentVNode)("",!0),s.dow_zt==99?((0,t.openBlock)(),(0,t.createElementBlock)("u-text",{key:5,class:"li_r_t"},"\u4E0B\u8F7D\u5931\u8D25")):(0,t.createCommentVNode)("",!0),s.dow_zt==99||s.dow_zt==98||s.dow_zt==66?((0,t.openBlock)(),(0,t.createElementBlock)("u-text",{key:6,class:"li_r_b",onClick:a=>p.delazb(l,s.dow_id)},"\u5220\u9664",8,["onClick"])):(0,t.createCommentVNode)("",!0)])])]))),128))])}var c=f(N,[["render",H],["styles",[j]]]);var u=plus.webview.currentWebview();if(u){let e=parseInt(u.id),o="pages/user/dow",i={};try{i=JSON.parse(u.__query__)}catch(n){}c.mpType="page";let r=Vue.createPageApp(c,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:o,__pageQuery:i});r.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...c.styles||[]])),r.mount("#root")}})();
