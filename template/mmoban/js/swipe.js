!function(a,c){"function"==typeof define&&define.amd?define([],function(){return a.Swipe=c()}):"object"==typeof exports?module.exports=c():a.Swipe=c()}(this,function(){function a(a,d){"use strict";function e(){u=T.children,x=u.length,u.length<2&&(d.continuous=!1),t.transitions&&d.continuous&&u.length<3&&(T.appendChild(u[0].cloneNode(!0)),T.appendChild(T.children[1].cloneNode(!0)),u=T.children),g=new Array(u.length),y=a.getBoundingClientRect().width||a.offsetWidth,T.style.width=u.length*y*2+"px";for(var c=u.length;c--;){var v=u[c];v.style.width=y+"px",v.setAttribute("data-index",c),t.transitions&&(v.style.left=c*-y+"px",b(c,w>c?-y:c>w?y:0,0))}d.continuous&&t.transitions&&(b(E(w-1),-y,0),b(E(w+1),y,0)),t.transitions||(T.style.left=w*-y+"px"),a.style.visibility="visible"}function f(){d.continuous?L(w-1):w&&L(w-1)}function h(){d.continuous?L(w+1):w<u.length-1&&L(w+1)}function E(a){return(u.length+a%u.length)%u.length}function i(){var a=w;return a>=x&&(a-=x),a}function L(a,c){if(w!==a){if(t.transitions){var v=Math.abs(w-a)/(w-a);if(d.continuous){var e=v;v=-g[E(a)]/y,v!==e&&(a=-v*u.length+a)}for(var f=Math.abs(w-a)-1;f--;)b(E((a>w?a:w)-f-1),y*v,0);a=E(a),b(w,y*v,c||k),b(a,0,c||k),d.continuous&&b(E(a-v),-(y*v),0)}else a=E(a),m(w*-y,a*-y,c||k);w=a,s(d.callback&&d.callback(i(),u[w]))}}function b(a,c,v){l(a,c,v),g[a]=c}function l(a,c,v){var d=u[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=v+"ms",e.webkitTransform="translate("+c+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+c+"px)")}function m(a,c,v){if(!v)return void(T.style.left=c+"px");var e=+new Date,f=setInterval(function(){var h=+new Date-e;return h>v?(T.style.left=c+"px",z&&n(),d.transitionEnd&&d.transitionEnd.call(event,i(),u[w]),void clearInterval(f)):void(T.style.left=(c-a)*(Math.floor(h/v*100)/100)+a+"px")},4)}function n(){D=setTimeout(h,z)}function o(){z=0,clearTimeout(D)}function p(){o(),z=d.auto||0,n()}function q(a){return/^mouse/.test(a.type)}var r=function(){},s=function(a){setTimeout(a||r,0)},t={addEventListener:!!c.addEventListener,touch:"ontouchstart"in c||c.DocumentTouch&&v instanceof DocumentTouch,transitions:function(a){var c=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var v in c)if(void 0!==a.style[c[v]])return!0;return!1}(v.createElement("swipe"))};if(a){var u,g,y,x,T=a.children[0];d=d||{};var w=parseInt(d.startSlide,10)||0,k=d.speed||300;d.continuous=void 0!==d.continuous?d.continuous:!0,d.autoRestart=void 0!==d.autoRestart?d.autoRestart:!1;var D,M,z=d.auto||0,S={},R={},I={handleEvent:function(a){switch(a.type){case"mousedown":case"touchstart":this.start(a);break;case"mousemove":case"touchmove":this.move(a);break;case"mouseup":case"mouseleave":case"touchend":s(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":s(this.transitionEnd(a));break;case"resize":s(e)}d.stopPropagation&&a.stopPropagation()},start:function(a){var c;q(a)?(c=a,a.preventDefault()):c=a.touches[0],S={x:c.pageX,y:c.pageY,time:+new Date},M=void 0,R={},q(a)?(T.addEventListener("mousemove",this,!1),T.addEventListener("mouseup",this,!1),T.addEventListener("mouseleave",this,!1)):(T.addEventListener("touchmove",this,!1),T.addEventListener("touchend",this,!1))},move:function(a){var c;if(q(a))c=a;else{if(a.touches.length>1||a.scale&&1!==a.scale)return;d.disableScroll&&a.preventDefault(),c=a.touches[0]}R={x:c.pageX-S.x,y:c.pageY-S.y},"undefined"==typeof M&&(M=!!(M||Math.abs(R.x)<Math.abs(R.y))),M||(a.preventDefault(),o(),d.continuous?(l(E(w-1),R.x+g[E(w-1)],0),l(w,R.x+g[w],0),l(E(w+1),R.x+g[E(w+1)],0)):(R.x=R.x/(!w&&R.x>0||w===u.length-1&&R.x<0?Math.abs(R.x)/y+1:1),l(w-1,R.x+g[w-1],0),l(w,R.x+g[w],0),l(w+1,R.x+g[w+1],0)))},end:function(a){var c=+new Date-S.time,v=Number(c)<250&&Math.abs(R.x)>20||Math.abs(R.x)>y/2,e=!w&&R.x>0||w===u.length-1&&R.x<0;d.continuous&&(e=!1);var f=R.x<0;M||(v&&!e?(f?(d.continuous?(b(E(w-1),-y,0),b(E(w+2),y,0)):b(w-1,-y,0),b(w,g[w]-y,k),b(E(w+1),g[E(w+1)]-y,k),w=E(w+1)):(d.continuous?(b(E(w+1),y,0),b(E(w-2),-y,0)):b(w+1,y,0),b(w,g[w]+y,k),b(E(w-1),g[E(w-1)]+y,k),w=E(w-1)),d.callback&&d.callback(i(),u[w])):d.continuous?(b(E(w-1),-y,k),b(w,0,k),b(E(w+1),y,k)):(b(w-1,-y,k),b(w,0,k),b(w+1,y,k))),q(a)?(T.removeEventListener("mousemove",I,!1),T.removeEventListener("mouseup",I,!1),T.removeEventListener("mouseleave",I,!1)):(T.removeEventListener("touchmove",I,!1),T.removeEventListener("touchend",I,!1))},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)===w&&((z||d.autoRestart)&&p(),d.transitionEnd&&d.transitionEnd.call(a,i(),u[w]))}};return e(),z&&n(),t.addEventListener?(t.touch&&T.addEventListener("touchstart",I,!1),d.draggable&&T.addEventListener("mousedown",I,!1),t.transitions&&(T.addEventListener("webkitTransitionEnd",I,!1),T.addEventListener("msTransitionEnd",I,!1),T.addEventListener("oTransitionEnd",I,!1),T.addEventListener("otransitionend",I,!1),T.addEventListener("transitionend",I,!1)),c.addEventListener("resize",I,!1)):c.onresize=function(){e()},{setup:function(){e()},slide:function(a,c){o(),L(a,c)},prev:function(){o(),f()},next:function(){o(),h()},restart:function(){p()},stop:function(){o()},getPos:function(){return i()},getNumSlides:function(){return x},kill:function(){o(),T.style.width="",T.style.left="";for(var a=u.length;a--;){var v=u[a];v.style.width="",v.style.left="",t.transitions&&l(a,0,0)}t.addEventListener?(T.removeEventListener("touchstart",I,!1),T.removeEventListener("mousedown",I,!1),T.removeEventListener("webkitTransitionEnd",I,!1),T.removeEventListener("msTransitionEnd",I,!1),T.removeEventListener("oTransitionEnd",I,!1),T.removeEventListener("otransitionend",I,!1),T.removeEventListener("transitionend",I,!1),c.removeEventListener("resize",I,!1)):c.onresize=null}}}}var c=this,v=c.document;return(c.jQuery||c.Zepto)&&!function(c){c.fn.Swipe=function(v){return this.each(function(){c(this).data("Swipe",new a(c(this)[0],v))})}}(c.jQuery||c.Zepto),a});